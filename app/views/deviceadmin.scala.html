@(keyForm: Form[AccessKey], keys: Set[AccessKey])

<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <title>OPQHub - Devices</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <!-- Needed libraries -->
    <script src="@routes.Assets.at("dev/contrib/js/jquery-2.1.1.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("dev/contrib/js/moment.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("dev/contrib/js/bootstrap.js")" type="text/javascript"></script>

    <link rel="stylesheet" media="screen" href="@routes.Assets.at("dev/contrib/css/bootstrap.css")">

    <link rel="stylesheet" media="screen" href="@routes.Assets.at("dev/css/site.css")">

    <!-- Validation -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css"/>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/js/bootstrapValidator.min.js"></script>

  </head>
  <body>
    @navbar()
    <!-- Main content -->
  <div class="container" id="main-content">
    <div class="row">
      <!-- OPQBoxes docs -->
      <div class="col-lg-4 well">
        <b>OPQBoxes</b>
        <p>This page allows for the management of OPQBoxes.</p>
        <p>OPQBoxes already registered with your account will show up in the table</p>
        <p>Each row displays basic facts about your registered OPQBoxes.</p>
        <p>To update an existing box, select the "Configure OPQBox" button beside the OPQBox you would like to configure.</p>
        <p>To add an exisiting OPQBox you have access to, fill out the information in the "Connect to OPQBox" form.</p>

      </div>

      <!-- List of opq boxes -->
      <div class="col-lg-8">
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <th>Description</th>
              <th>Id</th>
              <th>Key</th>
              <th>Sharing Data</th>
              <th><!--Empty for configure button--></th>
            </thead>
            <tbody>
            @for(key <- keys) {
              <tr>
                <td>@key.getOpqDevice.getDescription</td>
                <td>@key.getDeviceId()</td>
                <td>@key.getAccessKey()</td>
                <td>@key.getOpqDevice.getSharingData</td>
                <td>
                  <a href="@routes.Administration.configureDevice(key.getDeviceId, key.getAccessKey)" class="btn btn-warning btn-xs pull-right">Configure OPQBox</a>
                </td>
              </tr>
            }
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Device adition form -->
    <div class="row">
      <div class="col-lg-8 col-lg-offset-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Connect to OPQBox</h3>
          </div>
          <div class="panel-body">
            <form id="addDeviceForm" action="/private/admin/device/save" method="POST" class="form-horizontal">
              @helper.textinput("deviceId", "Device Id *", "col-sm-3", "col-sm-7", "")
              @helper.textinput("accessKey", "Access Key *", "col-sm-3", "col-sm-7", "")
              <input type="hidden" name="sharingData" id="sharingData" value="false" />
              <button type="submit" class="btn btn-primary btn-xs col-sm-offset-3">Add OPQBox</button>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
  <script type="text/javascript">

    $(document).ready(function() {
      $('#addDeviceForm').bootstrapValidator({
          message: 'This value is not valid',
          feedbackIcons: {
              valid: 'glyphicon glyphicon-ok',
              invalid: 'glyphicon glyphicon-remove',
              validating: 'glyphicon glyphicon-refresh'
          },
          fields: {
              deviceId: {
                  message: 'The device id is not valid',
                  validators: {
                      notEmpty: {
                          message: 'The device id is required and cannot be empty'
                      },
                      digits: {
                        message: "The device id should only contain digits"
                      }
                  }
              },
              accessKey: {
                message: "The access key is not valid",
                validators: {
                  notEmpty: {
                    message: 'The access key is required and cannot be empty'
                  }
                }
              },

          }
      });
});
  </script>
  </body>
</html>
